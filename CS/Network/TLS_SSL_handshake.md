## 🌿 TLS/SSL handshake
### 🔎 TLS/SSL handshake 정의와 과정을 설명해줘
> HTTPS에서 클라이언트와 서버 간 통신 전에 SSL 인증서로 신뢰성 여부를 판단하기 위해 연결하는 방식이다.

진행 순서는 다음과 같다.
![](https://velog.velcdn.com/images/leeseunghee00/post/4e6f730c-5fc5-41e9-b068-2c0471b0fbb1/image.png)

> 1. 클라이언트는 서버에게 `client hello` 메시지를 담아 서버로 보낸다.
\- 이때 암호화된 정보를 함께 담는데, **버전, 암호 알고리즘, 압축 방식** 등을 담는다.
<br>
2. 서버는 클라이언트가 보낸 암호 알고리즘과 압축 방식을 받고, `세션 ID`와 `CA 공개 인증서`를 `server hello` 메시지와 함께 담아 응답한다.
\- CA 인증서에는 앞으로 통신 이후 사용할 대칭키가 생성되기 전, 클라이언트에서 handshake 과정 속 암호화에 사용할 공개키를 담고 있다.
<br>
3. 클라이언트는 서버에서 보낸 CA 인증서에 대해 유효한지 확인한다.
<br>
4. 신뢰성이 확보되었다면, 클라이언트는 난수 바이트를 생성하여 서버의 공개키로 암호화한다.
\- 난수 바이트는 대칭키를 정하는데 사용되고, 앞으로 메시지 통신을 할 때 암호화하는 데 사용된다.
<br>
5. 만약 2번 단계에서 서버가 클라이언트 인증서를 함께 요구했다면 → 클라이언트의 인증서와 클라이언트의 개인키로 암호화된 임의의 바이트 문자열을 함께 보내준다.
<br>
6. 서버는 클라이언트의 인증서를 확인한 후, 난수 바이트를 자신의 개인키로 복호화한 후 대칭 마스터 키 생성에 활용한다.
<br>
7. 클라이언트는 handshake 과정이 완료되었다는 `finished` 메시지를 서버에 보내면서, 지금까지 보낸 교환 내역들을 해싱 후 그 값을 대칭키로 암호화하여 같이 담아 보내준다.
<br>
8. 서버도 동일하게 교환 내용들을 해싱한 뒤 클라이언트에서 보내준 값과 일치한지 확인한다.
\- 일치하면 → 서버도 `finished` 메시지를 대칭키로 암호하여 보낸다.
<br>
9. 클라이언트는 해당 메시지를 대칭키로 복호화하여 서로 통신이 가능한 신뢰 받은 사용자란 걸 인지하고, 앞으로 클라이언트와 서버는 해당 대칭키로 데이터를 주고 받을 수 있게 된다.

### 🔎 HTTPS와 SSL은 같은 것일까 ?
> _같지 않다 !!_

- SSL과 TLS는 `보안 계층` 이라는 **독립적인 프로토콜 계층**을 만들어서 **`응용 계층` 과 `전송 계층` 사이에 속한다.**

- HTTPS는 **TLS/SSL 프로토콜을 얹어서 보안된 HTTP 통신**을 하는 프로토콜이다.

✅ 정리하면,
- TLS와 SSL은 HTTP 뿐만 아니라 FTP, SMTP와 같이 다른 프로토콜에도 적용할 수 있다.
- HTTPS는 TLS와 HTTP와 조합된 프로토콜을 가리킨다.

※ TLS는 SSL의 후속 버전 
⇒ 따라서 SSL과 TLS는 같은 의미를 같는다. 하지만 일반적으로 SSL 용어로 많이 사용된다.
