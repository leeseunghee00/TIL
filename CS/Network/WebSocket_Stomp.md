## πΏ WebSocket & Stomp
### π” WebSocket μ΄λ€ ?
> Websocketμ€ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ¥Ό μ—°κ²°ν•κ³  μ‹¤μ‹κ°„μΌλ΅ ν†µμ‹ μ΄ κ°€λ¥ν•λ„λ΅ ν•λ” μ–‘λ°©ν–¥ ν†µμ‹  κΈ°μ μ΄λ‹¤.

μ‰½κ² μ–κΈ°ν•λ©΄ μ›Ή λ²„μ „μ TCP λλ” Socket μ΄λΌκ³  μ΄ν•΄ν•λ©΄ λλ‹¤.

<br>

### π” socket.io μ™€ websocket μ μ°¨μ΄μ  μ„¤λ…ν•΄μ¤
> - `socket.io` λ” λΈλΌμ°μ €μ μΆ…λ¥μ— μƒκ΄€μ—†μ΄ λ‹¤μ–‘ν• λ°©λ²•μ μ›Ή κΈ°μ μ„ μ‹¤μ‹κ°„μΌλ΅ κµ¬ν„ν•  μ μλ„λ΅ ν• κΈ°μ μ΄λ‹¤. 
- `websocket` μ€ μ‚¬μ©ν•  μ μλ” μ›Ή ν”„λΌμ°μ €μ μΆ…λ¥μ— μ μ•½μ΄ μλ‹¤.

<br>

### π” HTTP ν†µμ‹ κ³Ό WebSocket μ μ°¨μ΄μ  μ„¤λ…ν•΄μ¤
> κ²°μ •μ μΈ μ°¨μ΄λ” **ν”„λ΅ν† μ½** μ΄λ‹¤.

- WebSocket μ€ TCP κΈ°λ°μ μ–‘λ°©ν–¥ ν”„λ΅ν† μ½λ΅, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ—°κ²°μ„ μ μ§€ν•λ©΄μ„ μ‹¤μ‹κ°„ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μ„ μ μλ‹¤.
- HTTPλ” μ”μ²­-μ‘λ‹µ ν”„λ΅ν† μ½λ΅, μ£Όλ΅ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² μ”μ²­μ„ λ³΄λ‚΄κ³  μ„λ²„κ°€ κ·Έμ— λ€ν• μ‘λ‹µμ„ λ°ν™ν•λ” λ°©μ‹μΌλ΅ μ‘λ™ν•λ‹¤.

<br>

### π” WebSocket μ handshake ν”„λ΅ν† μ½μ€ μ–΄λ–»κ² μ‘λ™ν•λ”μ§€ μ„¤λ…ν•΄λ΄
> WebSocketμ€ μ΄κΈ°μ— ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ handshake κ³Όμ •μ„ κ±°μΉλ‹¤.

![](https://velog.velcdn.com/images/leeseunghee00/post/95375a47-3379-4a7b-a445-353ed74d8b69/image.png)

1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— WebSocket μ—°κ²°μ„ μ”μ²­ν•λ‹¤.
\- μ΄λ¥Ό μ„ν•΄ ν΄λΌμ΄μ–ΈνΈλ” HTTP ν”„λ΅ν† μ½μ„ μ‚¬μ© β†’ νΉμ • URLμ— GET μ”μ²­μ„ λ³΄λ‚Έλ‹¤.

2. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ λ°›κ³ , μ”μ²­μ— λ€ν• μ‘λ‹µμΌλ΅ `HTTP μƒνƒμ½”λ“ 101` μ„ λ°ν™ν•λ‹¤.

3. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ μ‘λ‹µμ„ λ°›μΌλ©΄, μ›Ή μ†μΌ“μΌλ΅ μ—…κ·Έλ μ΄λ“ν•κΈ° μ„ν• μ¶”κ°€μ μΈ ν—¤λ”μ™€ ν•¨κ» HTTP μ‘λ‹µμ„ μμ‹ ν•λ‹¤.

4. μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ WebSocket ν”„λ΅ν† μ½λ΅ ν†µμ‹ μ΄ μ΄λ£¨μ–΄μ§„λ‹¤.
\- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” κ°κ° WebSocket ν”„λ μ„μ„ μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μ„ μ μλ‹¤.
\- WebSocket ν”„λ μ„μ€ ν—¤μ–΄λ  νμ΄λ΅λ“λ΅ κµ¬μ„±λλ©°, μ΄λ¥Ό ν†µν•΄ μ‹¤μ‹κ°„ λ°μ΄ν„° κµν™μ„ μν–‰ν•λ‹¤.

_β μ„ κ³Όμ •μ€ μΌλ°μ μΌλ΅ **ν•λ²λ§** μ΄λ£¨μ–΄μ§€λ©°, μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ— μ§€μ†μ μΈ μ–‘λ°©ν–¥ ν†µμ‹ μ΄ κ°€λ¥ν•΄μ§„λ‹¤._

<br>

### π” STOMP μ΄λ€ ?
> STOMP(Simple Text Oriented Messaging Protocol) μ μ•½μλ΅, WebSocket μ„μ—μ„ λ™μ‘ν•λ” ν…μ¤νΈ κΈ°λ° λ©”μ„Έμ§• ν”„λ΅ν† μ½μ΄λ‹¤.

- STOMPμ€ μ—¬λ¬ ν”„λ μ„μ›ν¬μ™€ λ©”μ‹μ§• λΈλ΅μ»¤(Broker)μ—μ„ μ§€μ›λλ©°, λΈλ΅μ»¤λ¥Ό ν†µν•΄ λ‹¤λ¥Έ μ‚¬μ©μμ—κ² λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄κ±°λ‚ μ„λ²„κ°€ νΉμ • μ‘μ—…μ„ μν–‰ν•λ„λ΅ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Ό μ μλ‹¤.
- STOMPμ€ λ‹¤μ–‘ν• μ‹¤μ‹κ°„ μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ μ‹¤μ‹κ°„ ν†µμ‹ κ³Ό λ©”μ‹μ§• κΈ°λ¥μ„ κµ¬ν„ν•λ” λ°μ— ν™μ©λλ‹¤.

<br>

### π” WebSocket λ€μ‹  STOMP λ¥Ό μ‚¬μ©ν•λ” μ΄μ 
> κ° μ»¤λ„¥μ…λ§λ‹¤ WebSocketHandlerλ¥Ό κµ¬ν„ν•λ” κ²ƒλ³΄λ‹¤ Controller Annotation μ΄ μ μ©ν• κ°μ²΄λ¥Ό μ΄μ©ν•΄ μ΅°μ§μ μΌλ΅ κ΄€λ¦¬ν•  μ μλ‹¤.
