## 🌿 트랜잭션
### 🔎 트랜잭션이란 ?
> 트랜잭션(Transacation)은 **데이터베이스의 상태를 변화시키는 하나의 논리적인 작업 단위**이다.

트랜잭션은 여러 개의 작업을 하나의 논리적인 단위로 묶어서 반영과 복구를 조정하기 위해 사용한다. 따라서 데이터의 부정합이 일어났을 경우, 롤백(rollback)하여 이를 방지할 수 있다.

### 🔎 트랜잭션 vs Lock
> _트랜잭션은 **데이터의 정합성을 보장**하기 위한 기능이고, Lock은 **동시성을 제어**하기 위한 기능이다._

Lock은 여러 커넥션에서 동시에 동일한 자원을 요청할 경우, 순서대로 한 시점에는 하나의 커넥션만 변경할 수 있게 해주는 역할을 한다. 여기서 자원은 레코드나 테이블을 말한다.
이와는 다르게 트랜잭션은 하나의 논리적인 작업 중 몇 개의 쿼리를 있든 관계없이 논리적인 작업이 모두 적용되거나 적용되지 않아야 함을 보장한다.

### 🔎 트랜잭션의 4가지 특성을 간단하게 말해봐
> 트랜잭션은 **ACID** 라는 4가지 특성을 만족해야 한다.

1. **원자성 (Atomicity)**
: 만약 트랜잭션 중간에 어떠한 문제가 발생한다면, 트랙잭션에 해당하는 어떠한 작업 내용도 수행되어서는 안되며, 아무런 문제가 발생되지 않았을 경우에만 모든 작업이 수행되어야 한다.
2. **일관성 (Consistency)**
: 트랜잭션이 완료된 다음 상태에서도 트랜잭션이 일어나기 전의 상황과 동일하게 데이터의 일관성을 보장해야 한다.
3. **고립성 (Isolation)**
: 각각의 트랜잭션은 서로 간섭없이 독립적으로 수행되어야 한다.
4. **지속성 (Durability)**
: 트랜잭션이 정상적으로 종료된 다음에는 영구적으로 데이터베이스에 작업 결과가 저장되어야 한다.

### 🔎 트랜잭션을 사용할 때 주의할 점
> _트랜잭션은 꼭 필요한 최소의 코드에만 적용하는 것이 좋다._

즉, 트랜잭션의 범위를 최소화하는 것이다. 일반적으로 데이터베이스 커넥션은 개수가 제한적이다. 만약 각 단위 프로그램이 커넥션을 소유하는 시간이 길어진다면, 사용 가능한 여유 커넥션의 수는 줄어들게 된다. 이때 각 단위 프로그램에서 커넥션을 가져가기 위해 대기해야 하는 상황이 발생할 수 있다. 따라서 위 문제를 방지하기 위해 최소의 코드에만 트랜잭션을 적용하는 것이 좋다.
